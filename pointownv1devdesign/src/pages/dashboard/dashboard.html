<!--
  Generated template for the Dashboard page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-content>

  <ion-list no-lines no-padding no-margin>

    <ion-list-header>

      <ion-avatar item-left (click)="perfil()">
        <img style="width: 40px; height: 40px;" src="assets/img/pt-user.svg"/>
      </ion-avatar>

      <h2 (click)="perfil()">{{username}}</h2>
      <p (click)="perfil()">Socio: PT-{{userId}}</p>
      
      <ion-fab right middle>
        <button ion-fab mini color="primary" (click)="salir()">
          <ion-icon name="log-out"></ion-icon>
        </button>       
      </ion-fab>

    </ion-list-header>    

    <ion-item text-wrap>
      <h2 align="center" *ngIf="userTipo == false">Selecciona la tienda que deseas administrar o agrega una nueva.</h2>
      <h2 align="center" *ngIf="userTipo == true">Mensaje para el empleado.</h2>
    </ion-item>


  </ion-list>

  <ion-card *ngFor="let tienda of tiendas">
    <ion-card-content (click)="cuenta(tienda)">
      <ion-row>

        <ion-col width-80>
          <h1 color="black" padding-bottom>{{tienda.nombre}}</h1>
          <p>Mes: <strong color="dark">{{tienda.sumaVentas | currency:'USD':true:'1.2-2'}}</strong></p>
          <p>Stock: <strong color="dark">{{tienda.sumaStock}}</strong></p>
          <p>Empleados: {{tienda.empleados}}</p>
        </ion-col>
        <ion-col>
          <ion-icon style="font-size:80px;" color="primary" name="calculator"></ion-icon>
        </ion-col>

      </ion-row>
    </ion-card-content>
    
    <ion-row no-padding>
      <ion-col no-padding *ngIf="userTipo == false">
        <button no-margin ion-button full icon-only color="dark" (click)="editar(tienda)">
          <ion-icon color="primarymedium" name="create"></ion-icon>
        </button>
      </ion-col>
      <ion-col no-padding *ngIf="userTipo == false">
        <button no-margin ion-button full icon-only color="dark" (click)="agregarEmpleado(tienda)">
          <ion-icon color="light" name="person-add"></ion-icon>
        </button>
      </ion-col>
      <ion-col no-padding *ngIf="userTipo == false">
        <button no-margin ion-button full icon-only color="dark" (click)="estadisticas(tienda)">
          <ion-icon color="secondary" name="stats"></ion-icon>
        </button>
      </ion-col>
      <ion-col no-padding>
        <button no-margin ion-button full icon-only color="primary" (click)="productos(tienda)">
          <ion-icon color="primarymedium" name="archive"></ion-icon>
        </button>
      </ion-col>
    </ion-row>
    
  </ion-card>

</ion-content>

<ion-footer>
  <ion-toolbar padding>
    <button ion-button large block icon-right color="primary" (click)="nuevaTienda()" *ngIf="userTipo == false">
      Nueva tienda <ion-icon name="add"></ion-icon>    
    </button>    
  </ion-toolbar>
</ion-footer>